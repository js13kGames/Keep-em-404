<html>

<head>
  <title>js13kgames 2020</title>
  <script src="https://js13kgames.com/webxr-src/2020/aframe.js"></script>
  
  <script src="main.js" inline></script>
</head>

<body>
  <a-scene background="color:#000" game>
    <a-assets>
      <a-mixin id="enemy" class="enemy" scale=".05 1 1"></a-mixin>
      <a-mixin id="template-defense" click-handler="7" tower></a-mixin>
      <a-mixin id="template-bullet" geometry="primitive: box" bullet pixelshader-material="index:1;repeat:0.5 0.5;lookup:9;animationSpeed:1000"
        scale=".5 .5 .5"></a-mixin>
      <a-mixin id="template-page" scale="1.2 1.2 1.2" target-entity animation="property: rotation; to: 0 -360 0; dur: 4000; easing: linear; loop: true"></a-mixin>
      <a-mixin id="template-spawner" spawner="enemy:.enemy;container:#enemies;speed:2000"></a-mixin>
      <a-mixin id="template-placeholder" geometry="primitive: plane" placeholder-entity rotation="-90 0 0" position="0 -.5 0"></a-mixin>
    </a-assets>

    <a-entity id="game" scale=".3 .3 .3">
      <a-entity id="level">
        <a-entity id="defense"> </a-entity>
        <a-entity id="enemies"> </a-entity>
        <a-entity id="bullets"> </a-entity>
      </a-entity>
      <a-entity id="world"> </a-entity>
      </a-plane>
    </a-entity>

    <a-sky space animation="property: rotation; to: -360 -360 0; dur: 800000; easing: linear; loop: true"></a-sky>
    <a-entity id="left-hand" shoot-controls>
      <a-entity id="left-hand-menu" visible="false" scale="0.05 0.05 0.05" rotation="-80 0 0" position="0 0 0.1">
        <a-entity class="message" text="value: Not enough money to upgrade.; align: center; color: #fdeb77" scale="8 8 0.00001" position="0 2.2 0.4"></a-entity>
        <a-plane pixelshader-material="index:0" click-handler="0" color="red" position="-1.2 0 0.25">
          <a-entity score text="value:$50k;align:center;color:#000" scale="6 6 6"></a-entity>
        </a-plane>
        <a-plane class="clickable" pixelshader-material="index:2" click-handler="5" position="1.2 0 0.25"></a-plane>
        <a-plane disable-menu="1" class="clickable" pixelshader-material="index:4" click-handler="0"
          position="-2.4 1.2 0 "></a-plane>
        <a-plane disable-menu="2" class="clickable" pixelshader-material="index:14" click-handler="1"
          position="-1.2 1.2 0"></a-plane>
        <a-plane disable-menu="3" class="clickable" pixelshader-material="index:13" click-handler="2"
          position="0 1.2 0"></a-plane>
        <a-plane disable-menu="4" class="clickable" pixelshader-material="index:10" click-handler="3"
          position="1.2 1.2 0"></a-plane>
        <a-plane disable-menu="5" class="clickable" pixelshader-material="index:20" click-handler="4"
          position="2.4 1.2 0"></a-plane>
      </a-entity>
    </a-entity>
    <a-entity id="right-hand" shoot-controls="hand:right" raycaster="objects:.clickable">
      <a-plane pixelshader-material="index:21;transparent:true;twosided:true" rotation="-45 -90 90" scale=".2 .2 .2">
      </a-plane>
    </a-entity>
    <a-entity id='titlescreen' position="0 0 -.85" class="screen clickable" click-handler="42">
      <a-plane title-screen position="0 0 -2" class="screen clickable" scale="4 4 4" rotation="-14.5 0 0">
      </a-plane>
      <a-plane neon-text="text:Click here to start"class="screen clickable" position="0 .64 -1.9"
        scale="2 2 2"></a-plane>
    </a-entity>
    <a-entity id='gameoverscreen'  position="0 0 -.85" click-handler="42" class="screen clickable" position="0 -2 0" visible='false'>
      <a-plane title-screen="text:GAME OVER" class="screen clickable" position="0 0 -2" scale="4 4 4" rotation="-14.5 0 0"></a-plane>
      <a-plane neon-text="text:Click here to restart" class="screen clickable" position="0 .64 -1.9" scale="2 2 2"></a-plane>
    </a-entity>
    <a-entity id="camera" wasd-controls="acceleration:180" camera
      look-controls="pointerLockEnabled:false;touchEnabled:true" position="0 1.7 0" rotation="90 0 0">

      <a-entity id="menu" scale="0.05 0.05 0.05" position="0 -0.25 -0.4" rotation="-25 0 0">
        <a-entity class="message" text="value: Not enough money to upgrade.; align: center; color: #fdeb77" scale="8 8 0.00001" position="0 2.2 0.4"></a-entity>
        <a-plane pixelshader-material="index:0" click-handler="0" color="red" position="-1.2 0 0.25">
          <a-entity score text="value:$50k;align:center;color:#000" scale="6 6 6"></a-entity>
        </a-plane>
        <a-plane class="clickable" pixelshader-material="index:2" click-handler="5" position="1.2 0 0.25"></a-plane>
        <a-plane disable-menu="1" class="clickable" pixelshader-material="index:4" click-handler="0"
          position="-2.4 1.2 0 "></a-plane>
        <a-plane disable-menu="2" class="clickable" pixelshader-material="index:14" click-handler="1"
          position="-1.2 1.2 0"></a-plane>
        <a-plane disable-menu="3" class="clickable" pixelshader-material="index:13" click-handler="2"
          position="0 1.2 0"></a-plane>
        <a-plane disable-menu="4" class="clickable" pixelshader-material="index:10" click-handler="3"
          position="1.2 1.2 0"></a-plane>
        <a-plane disable-menu="5" class="clickable" pixelshader-material="index:20" click-handler="4"
          position="2.4 1.2 0"></a-plane>
      </a-entity>
      <a-entity id="cursor" cursor="rayOrigin: mouse" raycaster="objects:.clickable"></a-entity>
    </a-entity>
  </a-scene>
</body>

</html>